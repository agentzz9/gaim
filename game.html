<html><head><style>
canvas {
    border:1px solid #d3d3d3;
    background-color: #f1f1f1;
}
</style></head><body></body>
<script src="./Objects.js"></script>
<script type="text/javascript">
var PLAYER, goal;
var ROADLINE;
var gameArea = {
	canvas: document.createElement("canvas"),
    
    start : function() {
        this.canvas.width = 1320;
        this.canvas.height = 600;
        this.canvas.style = "background-color:#404142";
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
        this.frameNo = 0;
        window.addEventListener('keydown', function (e) {
            e.preventDefault();//prevent scroll of window :(
            gameArea.keys = (gameArea.keys || []);
            gameArea.keys[e.keyCode] = true;
        })
        window.addEventListener('keyup', function (e) {
            gameArea.keys[e.keyCode] = false; 
        })
        this.interval = setInterval(updateGameArea, 20);

    },
    clear : function() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
        //this.controlContext.clearRect(); .... needed ?
    },
    stop : function() {
        clearInterval(this.interval);
    }
}
function updateGameArea(){

	/*detect collisions, win/lose conditions, parse inputs, 
		trigger random obstacles ?, set speeds of components
	*/
	PLAYER.update();
    ROADLINE.update();

    if (gameArea.keys && gameArea.keys[37]) {PLAYER.speedX = -10; }
    if (gameArea.keys && gameArea.keys[39]) {PLAYER.speedX = 10; }
    if (gameArea.keys && gameArea.keys[38]) {//PLAYER.speedY = -1;
        //this will need to changed to move oher stuff instead of the car along y 
    }
    if (gameArea.keys && gameArea.keys[40]) {//PLAYER.speedY = 1;//similarly here
    }


	gameArea.clear();
	gameArea.frameNo += 1;
	//console.log(gameArea.frameNo);
	/*
	update components.redraw frame
	*/
    PLAYER.newPos();
    PLAYER.update();
    

	
}
function startGame(){
	
	//initialize objects,
//	PLAYER  = new Component(216/3, 490/3, "car", 10, 10, "image");
    PLAYER  = new Component(216/3, 490/3, "red", gameArea.canvas.width/2 ,
            gameArea.canvas.height*0.70);
 
    ROADLINE = new Component(40, 160, "white", gameArea.canvas.width*.33,10);

    /*uparrow = new component(150, 150, "uparrow", 100, 960, "image");
    downarrow = new component(150, 150, "downarrow", 100, 960+150, "image");
    leftarrow = new component(150, 150, "leftarrow", 100+350, 990, "image");
    rightarrow = new component(150, 150, "rightarrow", 100+350+170, 990, "image");
    bottomLine = new component(2000, 5, "black", 0, 950);//the len = 2000 behaves wierd. canvas.width not working :(*/

    gameArea.start();

}
function stopGame(){
	gameArea.stop();
}
</script>
<button onclick="startGame()">startgame</button>
<button onclick="stopGame()">stopgame</button>
<img hidden id="car" src="carimage.png"/>
 
<!-- <img hidden id="uparrow" src="uparrow.png"/>
<img hidden id="downarrow" src="downarrow.png"/>
<img hidden id="leftarrow" src="leftarrow.png"/>
<img hidden id="rightarrow" src="rightarrow.png"/> -->

 
</html>
